<!--
  Generated template for the Magias page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar color="danger">
        <ion-buttons left>
            <button ion-button icon-only menuToggle>
                <ion-icon name="menu"></ion-icon>
            </button>
        </ion-buttons>
        <ion-title>Magias {{title}}</ion-title>
        <ion-buttons right>
            <button ion-button icon-only (tap)="addMagia()">
                <ion-icon name="add"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
    <ion-grid>
        <ion-row>
            <ion-col>
                <ion-input type="text" [(ngModel)]="nomeMagiaFilter" placeholder="Nome Magia"></ion-input>
            </ion-col>
            <ion-col>
                <ion-input type="number" [(ngModel)]="nivelTipoFilter" placeholder="Nivel da Magia"></ion-input>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-header>

<ion-content>
    <ion-list [virtualScroll]="magias | magiafilter : nomeMagiaFilter : nivelTipoFilter" [virtualTrackBy]="trackById" [approxItemHeight]="'122px'">
        <ion-item-sliding *virtualItem="let item">
            <button ion-item (tap)="openDetalhe(item)">
                <span *ngFor="let tipos of item.tipoArray">{{tipos.nomeTipo}}: {{tipos.nivel}} </span>
                <h2><b>Nome</b>: {{item.nome}}</h2>
                <p><b>Alcance</b>: {{item.alcance.alcanceBase}} m + {{item.alcance.alcanceAdicional}} metros a cada {{item.alcance.niveisParaAdicao}} nivel(s)</p>
                <p><b>Duração</b>: 
                    <span *ngIf="item.duracao.medidaDuracaoBase != 0 && item.duracao.medidaDuracaoBase != 8">{{item.duracao.duracaoBase}}{{dice[item.duracao.tipoDuracaoBase]}} {{enum[item.duracao.medidaDuracaoBase]}} + {{item.duracao.duracaoAdicional}} {{enum[item.duracao.medidaDuracaoAdicional]}} a cada {{item.duracao.niveisParaAdicao}} nivel(s)</span>
                    <span *ngIf="item.duracao.medidaDuracaoBase == 0 || item.duracao.medidaDuracaoBase == 8">{{enum[item.duracao.medidaDuracaoBase]}}</span>
                </p>
                <p><b>Descrição</b>: {{item.descricao}}</p>
            </button>
            <ion-item-options>
                <button ion-button color="primary" (tap)="editMagia(item)">
                  <ion-icon name="open"></ion-icon>
                  Editar
                </button>
                <button color="danger" ion-button (tap)="deletarMagia(item)">
                  <ion-icon name="close"></ion-icon>
                  Excluir
                </button>
            </ion-item-options>
        </ion-item-sliding>
    </ion-list>
</ion-content>